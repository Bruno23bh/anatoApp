<!-- FIXME: Add this to the remote config  -->
<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button id="back-button"></ion-back-button>
    </ion-buttons>
    <ion-title>Pago de la licencia</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [ngSwitch]="activeSegment">
  <ion-grid fixed>

    <ion-row>
      <ion-col size="12">
        <ion-segment (ionChange)="changeSegment($event)"
                     id="caso-segments"
                     value="{{activeSegment}}">
          <ion-segment-button layout="icon-start"
                              value="{{tab.name}}"
                              [attr.disabled]="tab.disabled"
                              [id]="'segment' + tab.name"
                              *ngFor="let tab of tabs">
            <ion-icon name="{{tab.icon}}"></ion-icon>
            &nbsp;{{tab.name}}
          </ion-segment-button>
        </ion-segment>
      </ion-col>
    </ion-row>

    <div *ngSwitchCase="'Licencia'">
      <ion-row *ngIf="usuario.licence === 'gratis'">
        <ion-col size="12">
          <ion-text color="primary"
                    class="ion-text-center">
            <h1>¡Aprovecha el descuento de un 50% en tu primera compra!</h1>
          </ion-text>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12"
                 size-md="6"
                 size-lg="4"
                 class="ion-align-self-center">
          <ion-card class="large"
                    tappable
                    (click)="planSelected('basic')"
                    [ngClass]="{'selected': selectedPlan.nombre === 'basic'}">
            <ion-card-header class="ion-margin-top ion-text-center">
              <ion-card-title>BASIC</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p class="ion-text-center">Ideal para profesionales independientes</p>
              <ul>
                <li>
                  <ion-text>
                    <p>1 usuario</p>
                  </ion-text>
                </li>
                <li>
                  <ion-text>
                    <p>Puedes derivar casos</p>
                  </ion-text>
                </li>
                <li>
                  <ion-text>
                    <p>Sin alerta de asignaciones</p>
                  </ion-text>
                </li>
                <li>
                  <ion-text>
                    <p>Limite de 3 GB</p>
                  </ion-text>
                </li>
              </ul>
              <div class="ion-text-center ion-margin"
                   *ngIf="selectedPlan.nombre === 'basic'">
                <ion-icon class="selected-plan-icon ion-padding"
                          name="checkmark-circle-outline"></ion-icon>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12"
                 size-md="6"
                 size-lg="4"
                 class="ion-align-self-center">
          <ion-card class="large"
                    tappable
                    (click)="planSelected('premium')"
                    [ngClass]="{'selected': selectedPlan.nombre === 'premium'}">
            <ion-card-header class="ion-margin-top ion-text-center">
              <ion-card-title>PREMIUM</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p class="ion-text-center">Perfecto para pequeñas organizaciones</p>
              <ul>
                <li>
                  <ion-text>
                    <p>Puedes derivar y compartir casos</p>
                  </ion-text>
                </li>
                <li>
                  <ion-text>
                    <p>Alertar a otros usuarios de asignaciones</p>
                  </ion-text>
                </li>
                <!-- <li>
                <ion-text >
                  <p>Puedes compartir casos</p>
                </ion-text>
              </li>
              <li>
                <ion-text >
                  <p>Automatizacion de expedientes</p>
                </ion-text>
              </li> -->
                <li>
                  <ion-text>
                    <p>Hasta 5 usuarios</p>
                  </ion-text>
                </li>
                <li>
                  <ion-text>
                    <p>Limite de 10 GB</p>
                  </ion-text>
                </li>
              </ul>
              <div class="ion-text-center ion-margin"
                   *ngIf="selectedPlan.nombre === 'premium'">
                <ion-icon class="selected-plan-icon ion-padding"
                          name="checkmark-circle-outline"></ion-icon>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12"
                 size-md="6"
                 size-lg="4"
                 class="ion-align-self-center">
          <ion-card class="large"
                    tappable
                    (click)="planSelected('gold')"
                    [ngClass]="{'selected': selectedPlan.nombre === 'gold'}">
            <ion-card-header class="ion-margin-top ion-text-center">
              <ion-card-title>GOLD</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p class="ion-text-center">Lleva tu organizacion a otro nivel</p>
              <ul>
                <li>
                  <ion-text>
                    <p>Puedes derivar y compartir casos</p>
                  </ion-text>
                </li>
                <li>
                  <ion-text>
                    <p>Alertar a otros usuarios de asignaciones</p>
                  </ion-text>
                </li>
                <!--<li>
                <ion-text >
                  <p>Puedes compartir casos</p>
                </ion-text>
              </li>
              <li>
                <ion-text >
                  <p>Automatizacion de expedientes</p>
                </ion-text>
              </li> -->
                <li>
                  <ion-text>
                    <p>Hasta 15 usuarios</p>
                  </ion-text>
                </li>
                <li>
                  <ion-text>
                    <p>Limite de 15 GB</p>
                  </ion-text>
                </li>
              </ul>
              <div class="ion-text-center ion-margin"
                   *ngIf="selectedPlan.nombre === 'gold'">
                <ion-icon class="selected-plan-icon ion-padding"
                          name="checkmark-circle-outline"></ion-icon>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12"
                 size-md="10"
                 size-lg="10"
                 class="ion-align-self-center">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Resumen de compra</ion-card-title>
              <ion-card-subtitle *ngIf="selectedPlan.fechaHasta">Podra utilizar iuris hasta el:
                <strong>{{selectedPlan.fechaHasta}}</strong>.
              </ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <ion-grid fixed>
                <ion-row>
                  <ion-col size="12"
                           size-md="3"
                           size-lg="3"
                           class="ion-text-center">
                    <ion-card class="small"
                              tappable
                              [attr.disabled]="selectedPlan.nombre === ''"
                              [ngClass]="{'selected': selectedPlan.cantidadMeses === 1}"
                              (click)="timeSelected(1)">
                      <ion-card-header color="primary"
                                       class="header-small">
                        <ion-card-title class="title-small">Tarifa completa</ion-card-title>
                      </ion-card-header>
                      <ion-card-content class="ion-text-center">
                        <p class="ion-margin-top months-small">1 MES</p>
                        <ion-text color="primary">
                          <h6 *ngIf="selectedPlan.cantidadMeses === 1"> <strong>${{precioPorMes}}</strong> / mes</h6>
                        </ion-text>
                      </ion-card-content>
                    </ion-card>
                  </ion-col>
                  <ion-col size="12"
                           size-md="3"
                           size-lg="3">
                    <ion-card class="small"
                              tappable
                              [attr.disabled]="selectedPlan.nombre === ''"
                              [ngClass]="{'selected': selectedPlan.cantidadMeses === 6}"
                              (click)="timeSelected(6)">
                      <ion-card-header color="primary"
                                       class="header-small">
                        <ion-card-title class="title-small">Ahorras un 25%</ion-card-title>
                      </ion-card-header>
                      <ion-card-content class="ion-text-center">
                        <p class="ion-margin-top months-small">6 MESES</p>
                        <ion-text color="primary">
                          <h6 *ngIf="selectedPlan.cantidadMeses === 6"> <strong>${{total / 6}}</strong> / mes</h6>
                        </ion-text>
                      </ion-card-content>
                    </ion-card>
                  </ion-col>
                  <ion-col size="12"
                           size-md="3"
                           size-lg="3">
                    <ion-card class="small"
                              tappable
                              [attr.disabled]="selectedPlan.nombre === ''"
                              [ngClass]="{'selected': selectedPlan.cantidadMeses === 12}"
                              (click)="timeSelected(12)">
                      <ion-card-header color="primary"
                                       class="header-small">
                        <ion-card-title class="title-small">Ahorras un 50%</ion-card-title>
                      </ion-card-header>
                      <ion-card-content class="ion-text-center">
                        <p class="ion-margin-top months-small">12 MESES</p>
                        <ion-text color="primary">
                          <h6 *ngIf="selectedPlan.cantidadMeses === 12"> <strong>${{total / 12}}</strong> / mes</h6>
                        </ion-text>
                      </ion-card-content>
                    </ion-card>
                  </ion-col>
                  <ion-col size="12"
                           size-md="3"
                           size-lg="3"
                           class="ion-align-self-center ion-text-center">
                    <ion-text color="primary"
                              *ngIf="this.total !== 0">
                      <p>Total:</p>
                      <h1>${{total}}</h1>
                    </ion-text>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </ion-col>

        <ion-col size="12"
                 size-md="2"
                 size-lg="2"
                 class="ion-align-self-center ion-text-center">
          <img src="https://imgmp.mlstatic.com/org-img/banners/ar/medios/125X125.jpg"
               title="Mercado Pago - Medios de pago"
               alt="Mercado Pago - Medios de pago"
               width="125"
               height="125" />
          <ion-button (click)="callMercadoPago(false)"
                      [attr.disabled]="selectedPlan.cantidadMeses === 0 || precioPorHora === 0"
                      class="ion-margin"
                      expand="block">
            Pagar
          </ion-button>
        </ion-col>
      </ion-row>
    </div>
    <div *ngSwitchCase="'Almacenamiento'">
      <ion-row>
        <ion-col size="12"
                 size-md="6"
                 size-lg="4"
                 class="ion-align-self-center">
          <ion-card class="large"
                    tappable
                    (click)="storageSelected(1)"
                    [ngClass]="{'selected': selectedStorage === 1}">
            <ion-card-header class="ion-margin-top ion-text-center">
              <ion-card-title>1 GB</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <div class="ion-text-center ion-margin"
                   *ngIf="selectedStorage === 1">
                <ion-icon class="selected-plan-icon ion-padding"
                          name="checkmark-circle-outline"></ion-icon>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12"
                 size-md="6"
                 size-lg="4"
                 class="ion-align-self-center">
          <ion-card class="large"
                    tappable
                    (click)="storageSelected(3)"
                    [ngClass]="{'selected': selectedStorage === 3}">
            <ion-card-header class="ion-margin-top ion-text-center">
              <ion-card-title>3 GB</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <div class="ion-text-center ion-margin"
                   *ngIf="selectedStorage === 3">
                <ion-icon class="selected-plan-icon ion-padding"
                          name="checkmark-circle-outline"></ion-icon>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12"
                 size-md="6"
                 size-lg="4"
                 class="ion-align-self-center">
          <ion-card class="large"
                    tappable
                    (click)="storageSelected(5)"
                    [ngClass]="{'selected': selectedStorage === 5}">
            <ion-card-header class="ion-margin-top ion-text-center">
              <ion-card-title>5 GB</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <div class="ion-text-center ion-margin"
                   *ngIf="selectedStorage === 5">
                <ion-icon class="selected-plan-icon ion-padding"
                          name="checkmark-circle-outline"></ion-icon>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12"
                 size-md="6"
                 size-lg="6">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Resumen de compra</ion-card-title>
              <ion-card-subtitle *ngIf="selectedStorage !== 0">Tu extra estara disponible hasta el vencimiento de tu
                licencia.
              </ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <ion-grid fixed>
                <ion-row>
                  <ion-col>
                    <ion-text color="primary"
                              *ngIf="this.totalStorage !== 0">
                      <p>Total:</p>
                      <h1>${{totalStorage}}</h1>
                    </ion-text>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </ion-col>

        <ion-col offset="3"
                 size="12"
                 size-md="3"
                 size-lg="3"
                 class="ion-align-self-center ion-text-center">
          <img src="https://imgmp.mlstatic.com/org-img/banners/ar/medios/125X125.jpg"
               title="Mercado Pago - Medios de pago"
               alt="Mercado Pago - Medios de pago"
               width="125"
               height="125" />
          <ion-button (click)="callMercadoPago(true)"
                      [attr.disabled]="selectedStorage === 0"
                      class="ion-margin"
                      expand="block">
            Pagar
          </ion-button>
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>
</ion-content>